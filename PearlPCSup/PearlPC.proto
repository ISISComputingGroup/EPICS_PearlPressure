OutTerminator = "\r";
InTerminator = "\r\n";

ReplyTimeout = 2000;

## read into waveform as device returns 16 integers
get_st_array {
	out "st";
	in "Status Report";
	in "%*/Inputs$/";
	in "%d";
	in "OK";
}

set_ra{
	out "ra%#04d"
}

set_mx{
	out "mx%#04d"
}

set_mn{
	out "mn%#04d"
}

set_sp{
	out "sp%#04d"
}

set_sf{
	out "sf%#04d"
}

set_si{
	out "si%#04d"
}

set_sd{
	out "sd%#04d"
}

set_sloop{
	out "sloop%#01d"
}

set_user_limit{
    out "ul%d"
}

get_id {
	ExtraInput = Ignore;
	out "id";
	in "%/[0-9]{4} [0-9]{4}/";
}

reset {
	out "reset"
}

run {
	out "run"
}

stop {
	out "stop"
}

## $1 argument zero padded 4 digits
get_memory{
	ExtraInput = Ignore;
	out "vr\$1";
	in "vr%*04d %d";
}

#### currently used by ioc tests, but not real device commands
#### should be removed from here and any required access for testing
#### be via a lewis backdoor 

set_by{
	out "By%#01d"
}

set_ru{
	out "Ru%#01d"
}

set_re{
	out "Re%#01d"
}

set_St{
	out "St%#01d"
}

set_EM{
	out "Em%#01d"
}

set_ER{
	out "Er%#01d"
}

set_AM{
	out "AM%#01d"
}

set_GO{
	out "GO%d"
}
